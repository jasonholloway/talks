<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Docker in the Desert: A Testing Mirage</title>
<meta name="author" content="jason"/>
<meta name="description" content="The Testing Pyramid often collapses in on itself, especially in the spangly world of Microservices. Luckily, containers are here to pull it all together. Featuring Docker, SqlServer and a variety of camels."/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/sunblind.css" id="theme"/>

<link rel="stylesheet" href="./custom.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">

<section>
<section id="slide-1">
<h2 id="1"><a id="orgad3291a"></a><span class="section-number-2">1</span> Pyramids of the World</h2>
<div class="outline-text-2" id="text-1">
</div>
</section>
<section id="slide-1-0-1">
<h4 id="1-0-1"><a id="orgf99d234"></a><span class="section-number-4">1.0.1</span> Djoser - Stepped</h4>

<div class="figure">
<p><img src="./images/djoser.jpg" alt="djoser.jpg" />
</p>
</div>
<aside class="notes">
<ul>
<li>2630BC</li>
<li>stepped, 'staggering'</li>
<li>6-tier</li>
<li>loads of <i>mastabas</i> stacked</li>
<li>earliest collossal mound in Egypt</li>
<li>63m high (almost twice as tall as Stockport pyramid)</li>
<li>Djoser was first pharaoh of dynasty, after unification of Upper and Lower Egypt: prosperity</li>
<li>previously, Kingdomssplit by cascades of Nile</li>
<li>build for him by the demi-god Imhotep</li>

</ul>

</aside>

</section>
<section id="slide-1-0-2">
<h4 id="1-0-2"><a id="org5e48b18"></a><span class="section-number-4">1.0.2</span> Meidum - Collapsed</h4>

<div class="figure">
<p><img src="./images/meidum-pyramid.jpg" alt="meidum-pyramid.jpg" />
</p>
</div>
<aside class="notes">
<ul>
<li>straight, disasterous</li>
<li>Sneferu, 1st King of 4th dynasty, inherited construction from his dad, Huni</li>

</ul>

</aside>

</section>
<section id="slide-1-0-3">
<h4 id="1-0-3"><a id="orge1dbba7"></a><span class="section-number-4">1.0.3</span> Bent Pyramid</h4>

<div class="figure">
<p><img src="./images/bent-pyramid.jpg" alt="bent-pyramid.jpg" />
</p>
</div>
<aside class="notes">
<ul>
<li>Sneferu's first pyramid</li>
<li>changed angle and technique of bricklaying half way up</li>

</ul>

</aside>

</section>
<section id="slide-1-0-4">
<h4 id="1-0-4"><a id="org6c01af6"></a><span class="section-number-4">1.0.4</span> Great Pyramid of Giza - Success</h4>

<div class="figure">
<p><img src="./images/giza3.jpg" alt="giza3.jpg" />
</p>
</div>
<aside class="notes">
<ul>
<li>Pyramid of Khufu (bigger), Khafre (slightly smaller) and Menkaure (smaller, damaged)</li>
<li>Khafre in the middle below, retains a cap of polished limestone</li>
<li>one of the seven wonders of the world, the only one still standing</li>
<li>tallest on earth till 1300AD</li>
<li>Khufu was Sneferu's son</li>
<li>perfected the shape but then decided it wasn't worthwhile
subsequent pyramids smaller, cheaper, naffer</li>
<li><object type="image/svg+xml" data="https://upload.wikimedia.org/wikipedia/commons/a/ac/Comparison_of_pyramids_SMIL.svg" class="org-svg">
Sorry, your browser does not support SVG.</object></li>

</ul>

</aside>

<blockquote>
<p>
Most software today is very much like an Egyptian pyramid with millions of bricks piled on top of each other, with no structural integrity, but just done by brute force and thousands of slaves. 
&#x2013; Alan Kay
</p>
</blockquote>


</section>
</section>
<section>
<section id="slide-2">
<h2 id="2"><a id="orgc469480"></a><span class="section-number-2">2</span> The Testing Pyramid</h2>
<div class="outline-text-2" id="text-2">
</div>
</section>
<section id="slide-2-0-1">
<h4 id="2-0-1"><a id="org2023c27"></a><span class="section-number-4">2.0.1</span> Pyramid</h4>

<div class="figure">
<p><img src="./images/testpyramid.1.png" alt="testpyramid.1.png" />
</p>
</div>
<aside class="notes">
<ul>
<li>devised by Mike Cohn in 2009(AD)</li>
<li>ambiguity of axes</li>

</ul>

</aside>

</section>
<section id="slide-2-0-2">
<h4 id="2-0-2"><a id="org3c21e8d"></a><span class="section-number-4">2.0.2</span> Teardrop</h4>

<div class="figure">
<p><object type="image/svg+xml" data="./images/teardrop.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<aside class="notes">
<ul>
<li>tautological tests very low value, with high maintenance
taper off towards nothing</li>
<li>sweetspot!</li>

</ul>

</aside>
</section>
<section id="slide-2-0-3">
<h4 id="2-0-3"><a id="org35380d3"></a><span class="section-number-4">2.0.3</span> Onion</h4>

<div class="figure">
<p><object type="image/svg+xml" data="./images/onion.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<aside class="notes">
<ul>
<li>tests above and around ease refactoring</li>
<li>tests below are like concrete</li>
<li>reflects structure of implementation - simpler software at a courser granularity</li>

</ul>

</aside>
</section>
<section id="slide-2-0-4">
<h4 id="2-0-4"><a id="org20dcef2"></a><span class="section-number-4">2.0.4</span> Spinning Top</h4>

<div class="figure">
<p><object type="image/svg+xml" data="./images/spinningtop.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<aside class="notes">
<ul>
<li>SQLServer in particular! <b><b>**</b></b></li>
<li>microservices pushing the horizontal line down</li>
<li>previously HTTP pipeline was a barrier; not so anymore</li>
<li>but in general, Processes outside of CLR</li>

</ul>

</aside>
</section>
<section id="slide-2-0-5">
<h4 id="2-0-5"><a id="orgb324dd3"></a><span class="section-number-4">2.0.5</span> So&#x2026;</h4>
<ul>
<li class="fragment">sharp boundary, above which tests decay</li>
<li class="fragment">microservices push boundary down further</li>
<li class="fragment">pyramid collapses into its base</li>
<li class="fragment">mid-range testing should be:
<ul>
<li>cheaper</li>
<li>manipulable</li>
<li>more like CLR!</li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-3">
<h2 id="3"><a id="org2304cff"></a><span class="section-number-2">3</span> Process Wrangling</h2>
<aside class="notes">
<ul>
<li>What is Docker? needs to be asked here</li>
<li>not just processes, but resources</li>

</ul>

</aside>
</section>
<section id="slide-3-1">
<h3 id="3-1"><a id="org5ade7de"></a><span class="section-number-3">3.1</span> Camel Market</h3>

<div class="figure">
<p><img src="./images/camel-market2.jpg" alt="camel-market2.jpg" />
</p>
</div>
<aside class="notes">
<ul>
<li>contention</li>
<li>unpreparedness</li>
<li>lacks isolation</li>
<li>lacks reliability</li>
<li>lacks snappiness</li>

</ul>

</aside>

</section>
<section id="slide-3-2">
<h3 id="3-2"><a id="org10e687d"></a><span class="section-number-3">3.2</span> Ready to Ride</h3>

<div class="figure">
<p><img src="./images/camels-pool.jpg" alt="camels-pool.jpg" />
</p>
</div>

</section>
<section id="slide-3-3">
<h3 id="3-3"><a id="orgcf3fd6e"></a><span class="section-number-3">3.3</span> SqlServer, on Docker</h3>
<aside class="notes">
<ul>
<li>SqlServer basically an OS in itself - bypasses stuff</li>
<li><a href="https://hub.docker.com/_/microsoft-mssql-server">https://hub.docker.com/_/microsoft-mssql-server</a></li>

</ul>

</aside>
<ul>
<li>ported to Linux by Microsoft in 2017</li>
<li>free for non-production use</li>
<li>nestled inside experimental <i>Drawbridge</i> process - like a small enclave of virtual Windows</li>
<li>so SqlServer inside Drawbridge inside Docker inside&#x2026;</li>

</ul>

</section>
</section>
<section>
<section id="slide-4">
<h2 id="4"><a id="org2fd71ef"></a><span class="section-number-2">4</span> Code</h2>
<div class="outline-text-2" id="text-4">
</div>
</section>
<section id="slide-4-1">
<h3 id="4-1"><a id="org9cb69d0"></a><span class="section-number-3">4.1</span> Convenient but slow-ish</h3>


</section>
</section>
<section>
<section id="slide-5">
<h2 id="5"><a id="org0f019e9"></a><span class="section-number-2">5</span> CRIU</h2>
<aside class="notes">
<ul>
<li>criogenics/copy restore</li>
<li><a href="https://criu.org/Main_Page">https://criu.org/Main_Page</a></li>

</ul>

</aside>
</section>
<section id="slide-5-1">
<h3 id="5-1"><a id="org3697250"></a><span class="section-number-3">5.1</span> Pretty Fast</h3>
</section>
<section id="slide-5-2">
<h3 id="5-2"><a id="orge71c77e"></a><span class="section-number-3">5.2</span> <img src="./images/criu-ultimate-goal.jpg" alt="criu-ultimate-goal.jpg" /></h3>
</section>
</section>
</div>
</div>
<script src="./reveal.js/lib/js/head.min.js"></script>
<script src="./reveal.js/js/reveal.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
mouseWheel: false,
fragmentInURL: false,
hashOneBasedIndex: false,
pdfSeparateFragments: true,

overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'None', // see README of reveal.js for options
transitionSpeed: 'default',

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: './reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: './reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]

,slideNumber: 'h.v', hash: true,});
</script>
</body>
</html>
